------------------------------------
ğŸ›  Tech Stack
------------------------------------
- React (Vite)
- React Router DOM
- Axios
- Context API (Auth + Role)
- react-beautiful-dnd (Kanban)
- FullCalendar (Preventive maintenance)
- Plain CSS or Tailwind (clean professional UI)

------------------------------------
ğŸ” Authentication & Roles
------------------------------------
Roles:
- admin
- manager
- technician
- employee

Frontend must:
- Store JWT in localStorage
- Protect routes based on role
- Show/hide UI features by role

------------------------------------
ğŸ“¡ Backend API CONTRACT (DO NOT CHANGE)
------------------------------------
Auth:
POST   /api/auth/login
GET    /api/auth/me

Equipment:
POST   /api/equipment
GET    /api/equipment
GET    /api/equipment/:id
PATCH  /api/equipment/:id

Teams:
GET    /api/teams
GET    /api/teams/:id

Maintenance Requests:
POST   /api/requests
GET    /api/requests
PATCH  /api/requests/:id
GET    /api/requests/calendar
GET    /api/requests/by-equipment/:equipmentId

------------------------------------
ğŸ“ Frontend Folder Structure
------------------------------------
src/
 â”œâ”€â”€ components/
 â”‚    â”œâ”€â”€ KanbanBoard/
 â”‚    â”œâ”€â”€ CalendarView/
 â”‚    â”œâ”€â”€ Equipment/
 â”‚    â”œâ”€â”€ Requests/
 â”‚    â”œâ”€â”€ Teams/
 â”‚    â””â”€â”€ common/
 â”œâ”€â”€ pages/
 â”‚    â”œâ”€â”€ Login.jsx
 â”‚    â”œâ”€â”€ Dashboard.jsx
 â”‚    â”œâ”€â”€ EquipmentPage.jsx
 â”‚    â”œâ”€â”€ RequestsPage.jsx
 â”‚    â”œâ”€â”€ CalendarPage.jsx
 â”œâ”€â”€ context/
 â”‚    â”œâ”€â”€ AuthContext.jsx
 â”œâ”€â”€ services/
 â”‚    â”œâ”€â”€ api.js
 â”œâ”€â”€ routes/
 â”‚    â”œâ”€â”€ ProtectedRoute.jsx
 â”œâ”€â”€ App.jsx
 â””â”€â”€ main.jsx

------------------------------------
ğŸ“Œ UI REQUIREMENTS
------------------------------------

1ï¸âƒ£ Kanban Board (Main Workspace)
- Columns: New | In Progress | Repaired | Scrap
- Drag & Drop between columns
- Update request status on drop
- Show technician avatar
- Overdue requests highlighted in red
- Only team technicians can move cards

2ï¸âƒ£ Calendar View (Preventive Maintenance)
- Show only Preventive requests
- Fetch data from /api/requests/calendar
- Click a date â†’ open Create Request modal
- Scheduled jobs visible to technicians

3ï¸âƒ£ Equipment Management
- Equipment list with details
- Smart Button: "Maintenance (count)"
- Badge shows number of open requests
- Clicking opens filtered requests:
  /api/requests/by-equipment/:id
- Disable actions if equipment is scrapped

4ï¸âƒ£ Create / Edit Maintenance Request
- Select Equipment â†’ auto-fill:
  - Maintenance Team
  - Default Technician
- Fields:
  - Subject
  - Type (Corrective / Preventive)
  - Scheduled Date
  - Duration (after completion)

5ï¸âƒ£ Scrap Handling
- If request status = Scrap:
  - Show warning UI
  - Disable future requests for that equipment

------------------------------------
âš™ï¸ Global UX Rules
------------------------------------
- Loading states everywhere
- Error handling with toast/messages
- Reusable form components
- Clean professional dashboard layout
- Mobile-friendly

------------------------------------
ğŸ“¦ Output Expectations
------------------------------------
- Full React frontend code
- Ready to run with `npm install && npm run dev`
- No mock data
- No backend assumptions beyond given APIs
- Clear comments explaining logic


------------------------------------
ğŸ›  Tech Stack
------------------------------------
- Node.js
- Express.js
- MongoDB with Mongoose
- JWT Authentication
- bcrypt for password hashing
- dotenv
- CORS
- Centralized error handling

------------------------------------
ğŸ“ Required Folder Structure
------------------------------------
backend/
 â”œâ”€â”€ controllers/
 â”‚    â”œâ”€â”€ auth.controller.js
 â”‚    â”œâ”€â”€ user.controller.js
 â”‚    â”œâ”€â”€ team.controller.js
 â”‚    â”œâ”€â”€ equipment.controller.js
 â”‚    â”œâ”€â”€ request.controller.js
 â”œâ”€â”€ models/
 â”‚    â”œâ”€â”€ User.js
 â”‚    â”œâ”€â”€ MaintenanceTeam.js
 â”‚    â”œâ”€â”€ Equipment.js
 â”‚    â”œâ”€â”€ MaintenanceRequest.js
 â”œâ”€â”€ routes/
 â”‚    â”œâ”€â”€ auth.routes.js
 â”‚    â”œâ”€â”€ user.routes.js
 â”‚    â”œâ”€â”€ team.routes.js
 â”‚    â”œâ”€â”€ equipment.routes.js
 â”‚    â”œâ”€â”€ request.routes.js
 â”œâ”€â”€ middlewares/
 â”‚    â”œâ”€â”€ auth.middleware.js
 â”‚    â”œâ”€â”€ role.middleware.js
 â”‚    â”œâ”€â”€ error.middleware.js
 â”œâ”€â”€ utils/
 â”‚    â”œâ”€â”€ ApiError.js
 â”‚    â”œâ”€â”€ asyncHandler.js
 â”œâ”€â”€ config/
 â”‚    â””â”€â”€ db.js
 â”œâ”€â”€ server.js
 â””â”€â”€ .env.example

------------------------------------
ğŸ” Authentication & Authorization
------------------------------------
Roles:
- admin
- manager
- technician
- employee

Requirements:
- JWT-based auth
- Store role in token
- Middleware to:
  - Protect routes
  - Restrict access by role
- Passwords hashed with bcrypt
- Auth routes:
  POST /api/auth/login
  POST /api/auth/register
  GET  /api/auth/me

------------------------------------
ğŸ“¡ API CONTRACT (MUST MATCH EXACTLY)
------------------------------------

Users:
GET    /api/users
PATCH  /api/users/:id

Teams:
POST   /api/teams
GET    /api/teams
GET    /api/teams/:id

Equipment:
POST   /api/equipment
GET    /api/equipment
GET    /api/equipment/:id
PATCH  /api/equipment/:id

Maintenance Requests:
POST   /api/requests
GET    /api/requests
GET    /api/requests/:id
PATCH  /api/requests/:id
GET    /api/requests/calendar
GET    /api/requests/by-equipment/:equipmentId

------------------------------------
ğŸ“¦ MongoDB Models (Mandatory Fields)
------------------------------------

User:
- name
- email (unique)
- password
- role
- avatar
- teamId

MaintenanceTeam:
- name
- members (user references)

Equipment:
- name
- serialNumber
- department
- assignedEmployee
- maintenanceTeamId
- defaultTechnicianId
- purchaseDate
- warrantyExpiry
- location
- isScrapped (boolean)

MaintenanceRequest:
- type (corrective | preventive)
- subject
- equipmentId
- maintenanceTeamId
- technicianId
- status (new | in-progress | repaired | scrap)
- scheduledDate
- durationHours
- isOverdue
- createdBy

------------------------------------
ğŸ§  Business Logic (CRITICAL)
------------------------------------

1ï¸âƒ£ Auto-Fill Logic
- When creating a request:
  - Fetch equipment
  - Auto-assign:
    - maintenanceTeamId
    - defaultTechnicianId

2ï¸âƒ£ Status Workflow
- Default status = "new"
- Allowed transitions:
  new â†’ in-progress â†’ repaired
  any â†’ scrap

3ï¸âƒ£ Scrap Logic
- If status changes to "scrap":
  - Set equipment.isScrapped = true
  - Prevent future requests for that equipment

4ï¸âƒ£ Calendar API
- /api/requests/calendar
- Return only preventive requests
- Group by scheduledDate

5ï¸âƒ£ Overdue Logic
- If scheduledDate < today AND status != repaired
- Mark isOverdue = true

------------------------------------
ğŸ§¯ Error Handling
------------------------------------
- Centralized error middleware
- Custom ApiError class
- Proper HTTP status codes
- Validation errors handled cleanly

------------------------------------
âš™ï¸ General Rules
------------------------------------
- Use async/await
- Use asyncHandler wrapper
- Clean, readable, commented code
- No hard-coded values
- Environment variables for secrets
- MongoDB population where needed
- Ready for production deployment

------------------------------------
ğŸ“¦ Output Expectations
------------------------------------
- Generate ALL files listed
- Full working backend
- Can run with:
  npm install
  npm run dev
- No missing logic
- No TODOs
